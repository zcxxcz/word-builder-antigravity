初一背单词 Web App 需求文档（PRD）V1
1. 文档信息
- 文档名称：初一背单词 Web App（外研版 + 自定义）PRD
- 版本：V1.0
- 日期：2026-02-18
- 负责人：胖猴
- 评审人：三叶虫

---
2. 背景与目标
2.1 背景
初一阶段词汇增长快，常见问题：
- 背了就忘，复习节奏不稳定
- 认识意思与拼写能力脱节
- 练习形式枯燥导致坚持难
2.2 产品目标
- 通过“回想（检索）+ 拼写（输出）”的高效练习机制，让孩子在可持续节奏下掌握并保持词汇。
- 提供外研版新课标初一内置词表，同时支持家长/孩子自定义扩展。
2.3 成功标准（MVP）
- 7日留存率、每日完成率（计划任务完成）
- 拼写正确率提升（周维度）
- 掌握词数增长（L3 数量增长）
- 错词回流后纠正率（当天回流纠正比例）

---
3. 用户与使用场景
3.1 目标用户
- 学生（初一，12–13岁）：需要短时高频、强反馈、低挫败的学习体验
- 家长：主要诉求是词表可控、可加词、学习可视化（V1 不做家长端，先通过战报/导出替代）
3.2 核心场景
- 每天晚饭后/睡前 10–15 分钟：完成“到期复习 + 新词学习”
- 老师/家长临时加词：只输入英文 → 自动生成释义/音标/例句 → 稍作编辑 → 加入词表

---
4. 产品范围与约束
4.1 V1 必做（P0）
1. 词表：
- 内置：外研版新课标初一词汇（按册/单元组织）
- 自定义：手动添加 & CSV 导入
2. 计划与任务：
- 每日新学 N + SRS 到期复习 + 当天错词回流
3. 练习形式（无选择题）：
- 意思训练：回想 → 显示答案 → 自评
- 拼写训练：直接打字 → 判对错 → 错则强制纠正
4. 生词“智能生成”（只输英文）：
- 数据来源方案A：词典获取音标/释义（英文）+ 程序生成中文释义/初中例句 + TTS 兜底发音
5. 学习战报与进度统计
6. 本地存储（IndexedDB），不做账号同步
4.2 V1 明确不做
- 任何形式的选择题（意思/拼写均不提供选项）
- 登录/云同步
- 社交、排行榜、广告
- 老师端/班级端、家长端（后续版本）

---
5. 产品形态（Web）
- 浏览器访问（移动端优先，兼容 PC）
- 推荐做 PWA（可离线、可添加桌面）——可在 V1 或 V1.1

---
6. 信息架构（IA）
底部 Tab（移动端优先）：
1. 今日
2. 学习（沉浸式中隐藏 Tab）
3. 词表
4. 进度
5. 我的（设置/导出）

---
7. 核心业务规则
7.1 记忆等级（SRS）
- L0 陌生
- L1 认识
- L2 熟练
- L3 掌握
7.2 复习间隔（简化版）
按最终等级设置 next_review：
- L0：+1 天
- L1：+2 天
- L2：+5 天
- L3：+10 天
（后续可扩展为 20/30/60）
7.3 每日任务生成
参数：
- daily_new（默认 10）
- review_cap（默认 40）
- relapse_cap（默认 10）
队列构成（推荐默认顺序）：
1. 到期复习：next_review ≤ today，最多 review_cap
2. 新学：从未学过的词中取 daily_new
3. 当天回流：当日拼写错误 / 意思自评“不认识”的词（穿插出现），最多 relapse_cap
7.4 单词学习流程（每词固定两步）
Step A：意思回想（无选项）
- 展示英文 + 发音按钮
- 提示先回想中文 → 点击“显示答案”
- 显示中文释义后，学生自评（自评按钮非选项题）：
  - ✅ 我想对了（认识）
  - 🤔 模糊/不确定（不稳）
  - ❌ 没想出来（不认识）
Step B：拼写打字（无选项）
- 展示中文释义（随机取一个义项）+ 可选发音按钮
- 输入英文 → 提交判定
- 错误：显示正确拼写，并要求至少再输入一次正确拼写（强化）
7.5 等级更新规则（结合自评 + 拼写）
建议“拼写权重大于意思自评”：
- 意思自评：
  - 认识：level +1（上限 L3）
  - 模糊：level 不变，但 next_review 设得更近（比如至少 +1 天）
  - 不认识：level -1（下限 L0），加入当天回流
- 拼写判定：
  - 正确：level +1
  - 错误：level -1，并加入当天回流（且当场纠正一次）
最终以 Step B 拼写后的 level 作为“本轮最终 level”，并据此设置 next_review（Step A 的影响可作为“微调 next_review”的规则实现）。

---
8. 功能需求（模块拆解）
8.1 词表模块（P0）
8.1.1 内置外研版词表
- 支持按：册（上/下）→ 单元 → 词
- 每词字段（最低要求）：
  - word（英文）
  - meaning_cn（中文释义，支持多义 ; 分隔）
  - unit（单元）
  - source（外研版/自定义）
  - phonetic（可选）
  - example（可选）
  - audio（可选；否则TTS）
8.1.2 自定义词表管理
- 创建自定义词表（名称/描述可选）
- 手动添加词（见 8.2 智能生词生成）
- CSV 导入：
  - 上传 CSV → 字段映射 → 预览 → 导入
  - 推荐列：word, meaning_cn, unit(optional), example(optional)
- 同词合并规则：
  - 同一个英文在不同词表：共享学习状态
  - 释义冲突：合并释义

---
8.2 智能生词生成（只输入英文）（P0，方案A）
8.2.1 需求描述
用户在添加生词时只输入英文单词，程序自动生成：
- 中文释义（初中可接受难度）
- 音标（IPA）
- 例句（1–2句，初中难度）
- 发音（有音频则用音频，否则用 TTS 兜底）
生成后，用户可编辑所有字段再保存。
8.2.2 数据来源方案A（确定）
- 词典接口：获取音标/发音信息/英文释义
  1. 采用Free Dictionary API (dictionaryapi.dev)
- 程序生成：
  - 中文释义：基于英文释义/词典结果生成简体中文（短、常用）
  - 例句：生成生活化短句（6–12词），必须包含目标词
  2. 采用DeepSeek API
- 发音兜底：Web Speech API TTS

8.2.3 生成规则（硬约束）
- 中文释义：
  - 每条≤12个汉字
  - 最多 3 条义项（;分隔）
  - 避免生僻翻译与学术表达
- 例句：
  - 1–2 句
  - 句长 6–12 个词
  - 不使用复杂从句结构
  - 必须包含目标词（可允许基础变形，但优先原形）
- 失败兜底：
  - 词典查不到：提示“未找到词典信息”，仍生成简要中文释义（或允许保存为仅单词）
  - 例句生成失败：使用模板句兜底
8.2.4 页面交互（添加生词）
- 输入英文 → 点击“生成内容”
- 生成完成展示可编辑表单：
  - word、meaning_cn、phonetic、example1、example2、unit/tag（可选）
- 支持保存到：
  - 生词本（默认）或指定自定义词表
- 保存后可“立即练这个词”（可选）

---
8.3 学习模块（P0）
8.3.1 今日页（任务入口）
- 展示：新学数量、复习数量、预计时长、完成进度
- 入口：开始（默认：复习→新学→回流）
- 分入口：只复习 / 只新学
- 今日完成后：展示战报摘要 + “再练5分钟（错词）”
8.3.2 学习页（沉浸式）
- 顶部：返回、进度（x/y）
- 内容：
  - Step A 意思回想卡：
    - 英文 + 发音
    - “显示答案”按钮
    - 自评三按钮
  - Step B 拼写卡：
    - 中文释义（随机义项）+ 发音按钮（可选）
    - 输入框 + 提交
    - 对错反馈 + 错误纠正（至少输入一次正确）
- 交互：
  - Enter 提交
  - “我不会/跳过”（可选）：按错误处理并回流
- 错词回流：
  - 当天错的词加入回流队列，学习末尾或穿插出现（最多 relapse_cap）

---
8.4 进度与数据（P0）
8.4.1 进度页
- 累计：学过词数、掌握词数（L3）
- 本周：学习天数、累计学习量（可选）
- 等级分布：L0/L1/L2/L3
8.4.2 完成战报页
- 今日完成：新学数、复习数、拼写正确率、掌握新增、最难词（错最多）
- 奖励：积分/连续打卡（轻量实现即可）

---
8.5 我的/设置（P0）
- 设置每日新学量 daily_new
- 设置复习上限 review_cap
- 数据导出（JSON）
- 数据导入（JSON）
- 清空数据（双确认）
- 发音设置：TTS 开关

---
9. 非功能需求（NFR）
- 性能：学习卡切换无明显卡顿（体感 < 200ms）
- 可靠性：断网不丢数据（IndexedDB）
- 隐私：不上传个人数据（V1 全本地）
- 可维护性：词表与用户状态分离，便于后续云同步

---
10. 数据结构（建议）
10.1 表结构（IndexedDB）
- wordlists：id, name, source, created_at
- words：id, wordlist_id, word, meaning_cn, unit, phonetic?, example1?, example2?, source
- user_word_state：word_id, level, last_seen_at, next_review_at, wrong_count, correct_streak
- sessions：id, date, learned_count, review_count, spelling_accuracy, self_eval_stats, duration
10.2 导入导出
- 导出 JSON：包含上述表
- 导入 JSON：支持覆盖/合并（V1 可先覆盖）

---
11. 埋点（可选但建议）
- start_session(type=all/new/review)
- show_answer（意思卡点击显示）
- self_eval(choice=know/uncertain/dont_know)
- spelling_submit(correct, time_spent)
- word_level_change(from,to)
- session_complete(stats)

---
12. 风险与对策
- 生成内容质量波动：提供编辑入口
- 多义词困扰：V1 默认保留常用义项≤3
- 坚持难：任务上限 + 当天回流上限 + 战报强化正反馈

---
13. 验收标准（V1）
1. 外研版词表可浏览/选择，能生成每日任务
2. 添加生词仅输入英文即可生成中文释义/音标/例句，且可编辑并保存
3. 学习过程无选择题：意思回想+自评，拼写必须打字
4. 拼写错误必须提示正确答案并至少纠正一次，且进入当天回流
5. SRS 生效：next_review 随表现变化
6. 今日战报与进度页数据正确
7. 本地存储稳定：刷新/断网不丢数据
8. 支持数据导出/导入（JSON）

---
14. 附录：CSV 模板（自定义导入）
word,meaning_cn,unit,example
apple,苹果,Unit 1,This is an apple.
go,去;走,Unit 1,Let’s go to school.